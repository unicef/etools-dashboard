<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">
<script>
  window.dashBehaviors = window.dashBehaviors || {};
  dashBehaviors.actionsBehavior = {
    actionsList: [],
    actionCreators: [],
    register: function(name) {
      if (_.includes(this.actionsList, name)) {
        throw new Error('Attempting to register existing action');
      }
      this.actionsList.push(name);
      return name;
    },
    registerActionCreator: function(type, fields) {
      fields = fields || [];
      if (_.includes(this.actionCreators, type)) {
        throw new Error('Attempting to register existing action creator');
      }
      this.actionCreators.push(type);
      return this.createActionCreator(type, fields);
    },
    createActionCreator: function(type, fields) {
      fields = fields || [];
      return function() {
        var args = _.toArray(arguments);
        return this.createActionFromFields(type, fields, args);
      }
    },
    createActionFromFields: function(type, fields, values) {
      return this.createAction(type, fields.reduce(function(data, field, i) {
        var fieldObj = {};
        fieldObj[field] = values[i];
        return Object.assign(data, fieldObj);
      }, {}));
    },
    createAction: function(type, data) {
      data = data || {};
      return Object.assign({type: type}, data);
    }
  }
</script>